/*! Admin Page Framework - Form Script 1.0.0 */
!function(d){d.fn.incrementDigitByModel=function(e,n,t,a){if("string"!=typeof e)return e;a=a||"___i___",t=t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\\\$&");a=new RegExp("^(.+?)("+a+")(.*?)$","g");return t=t.replace(a,"($1)(\\d+)($3.*?)"),a=new RegExp(t),e=e.replace(a,function(e,t,a,r){return n=void 0===n?a:n,t+(Number(n)+1)+r})},d.fn.incrementAttributes=function(e,a,r,n){var i=d(this);d.each(e,function(e,t){i.incrementAttribute(t,a,r,n)})},d.fn.incrementAttribute=function(e,a,r,n){return this.attr(e,function(e,t){return d(this).incrementDigitByModel(t,a,r,n)})},d.fn.incrementIDAttribute=function(e,a){return this.attr(e,function(e,t){return n(e,t,1,a)})},d.fn.incrementNameAttribute=function(e,a){return this.attr(e,function(e,t){return i(e,t,1,a)})},d.fn.decrementIDAttribute=function(e,a){return this.attr(e,function(e,t){return n(e,t,-1,a)})},d.fn.decrementNameAttribute=function(e,a){return this.attr(e,function(e,t){return i(e,t,-1,a)})},d.fn.setIndexIDAttribute=function(e,a,r){return this.attr(e,function(e,t){return n(a,t,0,r)})},d.fn.setIndexNameAttribute=function(e,a,r){return this.attr(e,function(e,t){return i(a,t,0,r)})};function l(e){return void 0===e?-1:!0===e?1:!1!==e&&0!==e&&"number"==typeof e?e:-1}var n=function(n,e,i,t){if(void 0===e)return e;var d=1,a=new RegExp("(.+?)__(\\d+)(?=([_-]|$))","g"),r=e.match(a),r=null!==r&&r.hasOwnProperty("length")?r.length:0;if(0===r)return e;var o=(o=l(t))<0?r+1+o:o;return e.replace(a,function(e,t,a){if(d!==o)return d++,e;var r="";switch(i){case 1:r=t+"__"+(Number(a)+1);break;case-1:r=t+"__"+(Number(a)-1);break;default:r=t+"__"+n}return d++,r})},i=function(n,e,i,t){if(void 0===e)return e;var d=1,a=new RegExp("(.+?)\\[(\\d+)(?=\\])","g"),r=e.match(a),r=null!==r&&r.hasOwnProperty("length")?r.length:0;if(0===r)return e;var o=(o=l(t))<0?r+1+o:o;return e.replace(a,function(e,t,a){if(d!==o)return d++,e;var r="";switch(i){case 1:r=t+"["+(Number(a)+1);break;case-1:r=t+"["+(Number(a)-1);break;default:r=t+"["+n}return d++,r})}}(jQuery),function(e){function t(){jQuery(".admin-page-framework-form-loading").remove(),jQuery(".admin-page-framework-form-js-on").hide().css("visibility","visible").fadeIn(200).removeClass(".admin-page-framework-form-js-on")}var a=window.onerror;window.onerror=function(){return t(),"function"==typeof(window.onerror=a)&&a()},jQuery(document).ready(function(){t()}),e(document).on("admin-page-framework_saved_widget",function(e,t){jQuery(".admin-page-framework-form-loading").remove()})}(jQuery),function(a){a.fn.aAdminPageFrameworkInputOptions={},a.fn.storeAdminPageFrameworkInputOptions=function(e,t){e=e.replace(/__\d+_/,"___"),a.fn.aAdminPageFrameworkInputOptions[e]=t},a.fn.getAdminPageFrameworkInputOptions=function(e){return e=e.replace(/__\d+_/,"___"),void 0===a.fn.aAdminPageFrameworkInputOptions[e]?null:a.fn.aAdminPageFrameworkInputOptions[e]}}(jQuery),function(f){f.fn.aAdminPageFrameworkAddRepeatableFieldCallbacks=[],f.fn.aAdminPageFrameworkRepeatFieldCallbacks=[],f.fn.aAdminPageFrameworkRemoveRepeatableFieldCallbacks=[],f.fn.aAdminPageFrameworkSortedFieldsCallbacks=[],f.fn.aAdminPageFrameworkStoppedSortingFieldsCallbacks=[],f.fn.aAdminPageFrameworkAddedWidgetCallbacks=[],f.fn.aAdminPageFrameworkStoppedSortingSectionsCallbacks=[],f(document).on("admin-page-framework_added_repeatable_field",function(e,r,n,i,d,o){var l=jQuery(e.target);f.each(f.fn.aAdminPageFrameworkAddRepeatableFieldCallbacks,function(e,t){var a=t[0],t=t[1];return 2<t.length&&-1===f.inArray(r,t)||("function"!=typeof a||(-1===f.inArray(r,["_nested","inline_mixed"])&&console.warn("Admin Page Framework ("+r+" field type): The `added_repeatable_field` callback argument for the `registerAdminPageFrameworkCallbacks` method is deprecated. Use `repeated_field` instead."),void a(l,r,n,i,d,o)))})}),f(document).on("admin-page-framework_repeated_field",function(e,t,a){var r=jQuery(e.target),n=f(e.target).data("type"),i={};switch(i.call_type=t,i.field_type=n,i.model_element=a,i.added_element=r,t){case 1:i.incremented_from=Number(a.attr("data-largest_index")),i.index=i.incremented_from+1,i.id=a.attr("data-section_id_model"),i.name=a.attr("data-section_name_model"),i.flat_name=a.attr("data-flat_section_name_model"),i.address=a.attr("data-section_address_model");break;default:case 0:case 2:i.incremented_from=Number(a.attr("data-largest_index")-1),i.index=i.incremented_from+1,i.id=a.attr("data-field_tag_id_model"),i.name=a.attr("data-field_name_model"),i.flat_name=a.attr("data-field_name_flat_model"),i.address=a.attr("data-field_address_model")}f.each(f.fn.aAdminPageFrameworkRepeatFieldCallbacks,function(e,t){var a=t[0],t=t[1];return-1!==f.inArray(n,["_nested","inline_mixed"])||(-1===f.inArray(n,t)||("function"!=typeof a||void a(r,i)))})}),f(document).on("admin-page-framework_stopped_sorting_sections",function(e){var r=jQuery(e.target);f.each(f.fn.aAdminPageFrameworkStoppedSortingSectionsCallbacks,function(e,t){var a=t[0];t[1];if("function"!=typeof a)return!0;a(r)})}),f.fn.callBackSortedFields=function(a,r,n){var i=this;f.fn.aAdminPageFrameworkSortedFieldsCallbacks.forEach(function(e){var t=e[0],e=e[1];if(2<e.length&&-1===f.inArray(a,e))return!0;"function"==typeof t&&t(i,a,r,n)})},f.fn.callBackStoppedSortingFields=function(a,r,n){var i=this;f.fn.aAdminPageFrameworkStoppedSortingFieldsCallbacks.forEach(function(e){var t=e[0],e=e[1];if(2<e.length&&-1===f.inArray(a,e))return!0;"function"==typeof t&&t(i,a,r,n)})},f(document).on("admin-page-framework_saved_widget",function(e,r){f.each(f.fn.aAdminPageFrameworkAddedWidgetCallbacks,function(e,t){var a=t[0];t[1];if("function"!=typeof a)return!0;a(r)})}),f.fn.registerAdminPageFrameworkCallbacks=function(e,t){e=f.extend({added_repeatable_field:null,repeated_field:null,removed_repeatable_field:null,sorted_fields:null,stopped_sorting_fields:null,saved_widget:null,stopped_sorting_sections:null},e);(t=void 0===t?[]:t).push("_nested","inline_mixed"),f.fn.aAdminPageFrameworkAddRepeatableFieldCallbacks.push([e.added_repeatable_field,t]),f.fn.aAdminPageFrameworkRepeatFieldCallbacks.push([e.repeated_field,t]),f.fn.aAdminPageFrameworkRemoveRepeatableFieldCallbacks.push([e.removed_repeatable_field,t]),f.fn.aAdminPageFrameworkSortedFieldsCallbacks.push([e.sorted_fields,t]),f.fn.aAdminPageFrameworkStoppedSortingFieldsCallbacks.push([e.stopped_sorting_fields,t]),f.fn.aAdminPageFrameworkAddedWidgetCallbacks.push([e.saved_widget,t]),f.fn.aAdminPageFrameworkStoppedSortingSectionsCallbacks.push([e.stopped_sorting_sections,t])},f.fn.registerAPFCallback=function(e,t){f.fn.registerAdminPageFrameworkCallbacks(e,t)}}(jQuery),function(s){var m=AdminPageFrameworkScriptFormMain;s.fn.updateAdminPageFrameworkRepeatableFields=function(e){var t=this.find(".repeatable-field-add-button").first().data("id"),a=s("#"+t),r=s.extend({max:0,min:0,fadein:500,fadeout:500,disabled:!1,preserve_values:0},e);a.data("repeatable")||a.data("repeatable",r);e=s(this).find(".admin-page-framework-repeatable-field-buttons").filter(function(){return s(this).closest(".admin-page-framework-fields").attr("id")===t});e.attr("data-max",r.max),e.attr("data-min",r.min),e.attr("data-fadein",r.fadein),e.attr("data-fadeout",r.fadeout),e.attr("data-preserve_values",r.preserve_values);a=s(this).find(".repeatable-field-add-button");a.off("click"),a.on("click",function(){if(s(this).parent().data("disabled")){var e=s(this).parent().data("disabled");return tb_show(e.caption,s(this).attr("href")),!1}return s(this).addAdminPageFrameworkRepeatableField(),!1});e=s(this).find(".repeatable-field-remove-button");e.off("click"),e.on("click",function(){return s(this).removeAdminPageFrameworkRepeatableField(),!1});e=a.first().closest(".admin-page-framework-field").attr("id"),a=s("#"+t).find(".admin-page-framework-field").filter(function(){return s(this).closest(".admin-page-framework-fields").attr("id")===t}).length;0<r.min&&0<a&&0<r.min-a&&s("#"+e).addAdminPageFrameworkRepeatableField(e)},s.fn.addAdminPageFrameworkRepeatableField=function(e){void 0===e&&(e=s(this).closest(".admin-page-framework-field").attr("id"));var t=s("#"+e),a=t.clone(),r=t.closest(".admin-page-framework-fields"),n=r.attr("id"),i=r.data("repeatable"),d=(i=!i?{max:(f=t.find(".admin-page-framework-repeatable-field-buttons").filter(function(){return s(this).closest(".admin-page-framework-fields").attr("id")===n}).first()).attr("data-max"),min:f.attr("data-min"),fadein:f.attr("data-fadein"),fadeout:f.attr("data-fadeout"),preserve_values:f.attr("data-preserve_values")}:i).fadein,o=i.fadeout,l=i.max,e=r.find(".admin-page-framework-field").filter(function(){return s(this).closest(".admin-page-framework-fields").attr("id")===n}),f=t.find(".admin-page-framework-repeatable-field-buttons").filter(function(){return s(this).closest(".admin-page-framework-fields").attr("id")===n});if(0!=l&&e.length>=l){f=f.last(),l=s(this).formatPrintText(m.messages.cannotAddMore,l),l=s('<span class="repeatable-error repeatable-field-error" id="repeatable-error-'+n+'" >'+l+"</span>");return 0<r.find("#repeatable-error-"+n).length?r.find("#repeatable-error-"+n).replaceWith(l):f.before(l),void l.delay(2e3).fadeOut(o)}i.preserve_values||(a.find("input:not([type=radio], [type=checkbox], [type=submit], [type=hidden]),textarea").val(""),a.find("input[type=checkbox]").prop("checked",!1)),a.find(".repeatable-error").remove(),d?a.hide().insertAfter(t).delay(100).fadeIn(d):a.insertAfter(t),c(a,r),a.updateAdminPageFrameworkRepeatableFields(),t.find("input[type=radio][checked=checked]").prop("checked",!0).attr("checked","checked"),a.trigger("admin-page-framework_added_repeatable_field",[a.data("type"),a.attr("id"),0,0,0]),s(a).find(".admin-page-framework-field").addBack().trigger("admin-page-framework_repeated_field",[0,jQuery(a).closest(".admin-page-framework-fields")]);t=r.find(".repeatable-field-remove-button").filter(function(){return s(this).closest(".admin-page-framework-fields").attr("id")===n});return 1<t.length&&t.css("visibility","visible"),r.children(".admin-page-framework-field").children(".delimiter").show().last().hide(),a};var c=function(e,t){var a=Number(t.attr("data-largest_index"));t.attr("data-largest_index",a+1);var r=t.attr("data-field_tag_id_model"),n=t.attr("data-field_name_model"),i=t.attr("data-field_name_flat_model"),t=t.attr("data-field_address_model");e.incrementAttribute("id",a,r),e.find("label").incrementAttribute("for",a,r),e.find("input,textarea,select,option").incrementAttribute("id",a,r),e.find("input,textarea,select").incrementAttribute("name",a,n),e.find("input[type=hidden].element-address").incrementAttributes(["name","value","data-field_address_model"],a,t),e.find("input[type=radio][data-id],input[type=checkbox][data-id],select[data-id]").incrementAttribute("data-id",a,r),e.find(".admin-page-framework-field,.admin-page-framework-fields,.admin-page-framework-fieldset").incrementAttributes(["id","data-field_tag_id_model","data-field_id"],a,r),e.find(".admin-page-framework-fields").incrementAttributes(["data-field_name_model"],a,n),e.find(".admin-page-framework-fields").incrementAttributes(["data-field_name_flat","data-field_name_flat_model"],a,i),e.find(".admin-page-framework-fields").incrementAttributes(["data-field_address","data-field_address_model"],a,t)};s.fn.removeAdminPageFrameworkRepeatableField=function(){var e,t=s(this).closest(".admin-page-framework-field"),a=s(this).closest(".admin-page-framework-fields"),r=a.attr("id"),n=a.data("repeatable"),i=n?n.min:0,d=a.find(".admin-page-framework-field").filter(function(){return s(this).closest(".admin-page-framework-fields").attr("id")===r});0!=i&&d.length<=i?(e=t.find(".admin-page-framework-repeatable-field-buttons").filter(function(){return s(this).closest(".admin-page-framework-fields").attr("id")===r}).last(),d=s(this).formatPrintText(m.messages.cannotRemoveMore,i),i=s('<span class="repeatable-error repeatable-field-error" id="repeatable-error-'+r+'">'+d+"</span>"),0<(d=a.find("#repeatable-error-"+r).filter(function(){return s(this).closest(".admin-page-framework-fields").attr("id")===r})).length?d.replaceWith(i):e.before(i),e=n?n.fadeout:500,i.delay(2e3).fadeOut(e)):(e=n?n.fadeout:500,t.fadeOut(e,function(){s(this).remove();var e=a.find(".repeatable-field-remove-button").filter(function(){return s(this).closest(".admin-page-framework-fields").attr("id")===r});1===e.length&&e.css("visibility","hidden")}))}}(jQuery),function(t){t(document).ready(function(){t(".admin-page-framework-fields.sortable").each(function(){t(this).enableAdminPageFrameworkSortableFields()})}),t.fn.enableAdminPageFrameworkSortableFields=function(e){e=t("string"==typeof e?"#"+e+".sortable":this);e.off("sortupdate"),e.off("sortstop");e=e.sortable({items:"> div:not( .disabled )"});e.on("sortstop",function(){t(this).callBackStoppedSortingFields(t(this).data("type"),t(this).attr("id"),0)}),e.on("sortupdate",function(){t(this).callBackSortedFields(t(this).data("type"),t(this).attr("id"),0)})}}(jQuery),function(r){r(document).ready(function(){r(".admin-page-framework-sections.sortable-section").each(function(){r(this).enableAdminPageFrameworkSortableSections()})}),r.fn.enableAdminPageFrameworkSortableSections=function(e){var t=r("string"==typeof e?"#"+e+".sortable-section":this),a=t.hasClass("admin-page-framework-section-tabs-contents"),e=0<t.children(".admin-page-framework-section.is_subsection_collapsible").length;(t=a?t.find("ul.admin-page-framework-section-tabs"):t).off("sortupdate"),t.off("sortstop");e=t.sortable({items:a?"> li:not( .disabled )":"> div:not( .disabled, .admin-page-framework-collapsible-toggle-all-button-container )",handle:e&&".admin-page-framework-section-caption",stop:function(e,t){jQuery(this).trigger("admin-page-framework_stopped_sorting_sections",[])}});a||e.on("sortstop",function(){jQuery(this).find("caption > .admin-page-framework-section-title:not(.admin-page-framework-collapsible-sections-title,.admin-page-framework-collapsible-section-title)").first().show(),jQuery(this).find("caption > .admin-page-framework-section-title:not(.admin-page-framework-collapsible-sections-title,.admin-page-framework-collapsible-section-title)").not(":first").hide()})}}(jQuery),function(e){e.fn.reverse=[].reverse,e.fn.formatPrintText=function(){var a=arguments;return a[0].replace(/{(\d+)}/g,function(e,t){return void 0!==a[parseInt(t)+1]?a[parseInt(t)+1]:e})}}(jQuery),function(o){o(document).ready(function(){o(document).ajaxComplete(function(e,t,a){var r,n,i={},d="string"==typeof a.data?a.data.split("&"):{};for(r in d)n=d[r].split("="),i[decodeURIComponent(n[0])]=decodeURIComponent(n[1]);i.action&&"save-widget"===i.action&&(a=o('input.widget-id[value="'+i["widget-id"]+'"]').parents(".widget"),o(a).find(".admin-page-framework-sectionset").length<=0||(t.responseText?o(document).trigger("admin-page-framework_saved_widget",a):wpWidgets.save(a,0,1,0)))})})}(jQuery);