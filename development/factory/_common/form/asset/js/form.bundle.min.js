/*! Admin Page Framework - Form Main 1.0.1 */
!function(d){d.fn.incrementDigitByModel=function(e,n,t,a){if("string"!=typeof e)return e;a=a||"___i___",t=t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\\\$&");a=new RegExp("^(.+?)("+a+")(.*?)$","g");return t=t.replace(a,"($1)(\\d+)($3.*?)"),a=new RegExp(t),e=e.replace(a,function(e,t,a,r){return n=void 0===n?a:n,t+(Number(n)+1)+r})},d.fn.incrementAttributes=function(e,a,r,n){var i=d(this);d.each(e,function(e,t){i.incrementAttribute(t,a,r,n)})},d.fn.incrementAttribute=function(e,a,r,n){return this.attr(e,function(e,t){return d(this).incrementDigitByModel(t,a,r,n)})},d.fn.incrementIDAttribute=function(e,a){return this.attr(e,function(e,t){return n(e,t,1,a)})},d.fn.incrementNameAttribute=function(e,a){return this.attr(e,function(e,t){return i(e,t,1,a)})},d.fn.decrementIDAttribute=function(e,a){return this.attr(e,function(e,t){return n(e,t,-1,a)})},d.fn.decrementNameAttribute=function(e,a){return this.attr(e,function(e,t){return i(e,t,-1,a)})},d.fn.setIndexIDAttribute=function(e,a,r){return this.attr(e,function(e,t){return n(a,t,0,r)})},d.fn.setIndexNameAttribute=function(e,a,r){return this.attr(e,function(e,t){return i(a,t,0,r)})};function l(e){return void 0===e?-1:!0===e?1:!1!==e&&0!==e&&"number"==typeof e?e:-1}var n=function(n,e,i,t){if(void 0===e)return e;var d=1,a=new RegExp("(.+?)__(\\d+)(?=([_-]|$))","g"),r=e.match(a),r=null!==r&&r.hasOwnProperty("length")?r.length:0;if(0===r)return e;var o=(o=l(t))<0?r+1+o:o;return e.replace(a,function(e,t,a){if(d!==o)return d++,e;var r="";switch(i){case 1:r=t+"__"+(Number(a)+1);break;case-1:r=t+"__"+(Number(a)-1);break;default:r=t+"__"+n}return d++,r})},i=function(n,e,i,t){if(void 0===e)return e;var d=1,a=new RegExp("(.+?)\\[(\\d+)(?=\\])","g"),r=e.match(a),r=null!==r&&r.hasOwnProperty("length")?r.length:0;if(0===r)return e;var o=(o=l(t))<0?r+1+o:o;return e.replace(a,function(e,t,a){if(d!==o)return d++,e;var r="";switch(i){case 1:r=t+"["+(Number(a)+1);break;case-1:r=t+"["+(Number(a)-1);break;default:r=t+"["+n}return d++,r})}}(jQuery),function(e){e.fn.selectAllAdminPageFrameworkCheckboxes=function(){jQuery(this).parent().find("input[type=checkbox]").prop("checked",!0).trigger("change")},e.fn.deselectAllAdminPageFrameworkCheckboxes=function(){jQuery(this).parent().find("input[type=checkbox]").prop("checked",!1).trigger("change")}}(jQuery),function(e){function t(){jQuery(".admin-page-framework-form-loading").remove(),jQuery(".admin-page-framework-form-js-on").hide().css("visibility","visible").fadeIn(200).removeClass(".admin-page-framework-form-js-on")}var a=window.onerror;window.onerror=function(){return t(),"function"==typeof(window.onerror=a)&&a()},jQuery(document).ready(function(){t()}),e(document).on("admin-page-framework_saved_widget",function(e,t){jQuery(".admin-page-framework-form-loading").remove()})}(jQuery),function(a){a.fn.aAdminPageFrameworkInputOptions={},a.fn.storeAdminPageFrameworkInputOptions=function(e,t){e=e.replace(/__\d+_/,"___"),a.fn.aAdminPageFrameworkInputOptions[e]=t},a.fn.getAdminPageFrameworkInputOptions=function(e){return e=e.replace(/__\d+_/,"___"),void 0===a.fn.aAdminPageFrameworkInputOptions[e]?null:a.fn.aAdminPageFrameworkInputOptions[e]}}(jQuery),function(s){s.fn.aAdminPageFrameworkAddRepeatableFieldCallbacks=[],s.fn.aAdminPageFrameworkRepeatFieldCallbacks=[],s.fn.aAdminPageFrameworkRemoveRepeatableFieldCallbacks=[],s.fn.aAdminPageFrameworkSortedFieldsCallbacks=[],s.fn.aAdminPageFrameworkStoppedSortingFieldsCallbacks=[],s.fn.aAdminPageFrameworkAddedWidgetCallbacks=[],s.fn.aAdminPageFrameworkStoppedSortingSectionsCallbacks=[],s(document).on("admin-page-framework_added_repeatable_field",function(e,r,n,i,d,o){var l=jQuery(e.target);s.each(s.fn.aAdminPageFrameworkAddRepeatableFieldCallbacks,function(e,t){var a=t[0],t=t[1];return 2<t.length&&-1===s.inArray(r,t)||("function"!=typeof a||(-1===s.inArray(r,["_nested","inline_mixed"])&&console.warn("Admin Page Framework ("+r+" field type): The `added_repeatable_field` callback argument for the `registerAdminPageFrameworkCallbacks` method is deprecated. Use `repeated_field` instead."),void a(l,r,n,i,d,o)))})}),s(document).on("admin-page-framework_repeated_field",function(e,t,a){var r=jQuery(e.target),n=s(e.target).data("type"),i={};switch(i.call_type=t,i.field_type=n,i.model_element=a,i.added_element=r,t){case 1:i.incremented_from=Number(a.attr("data-largest_index")),i.index=i.incremented_from+1,i.id=a.attr("data-section_id_model"),i.name=a.attr("data-section_name_model"),i.flat_name=a.attr("data-flat_section_name_model"),i.address=a.attr("data-section_address_model");break;default:case 0:case 2:i.incremented_from=Number(a.attr("data-largest_index")-1),i.index=i.incremented_from+1,i.id=a.attr("data-field_tag_id_model"),i.name=a.attr("data-field_name_model"),i.flat_name=a.attr("data-field_name_flat_model"),i.address=a.attr("data-field_address_model")}s.each(s.fn.aAdminPageFrameworkRepeatFieldCallbacks,function(e,t){var a=t[0],t=t[1];return-1!==s.inArray(n,["_nested","inline_mixed"])||(-1===s.inArray(n,t)||("function"!=typeof a||void a(r,i)))})}),s(document).on("admin-page-framework_stopped_sorting_sections",function(e){var r=jQuery(e.target);s.each(s.fn.aAdminPageFrameworkStoppedSortingSectionsCallbacks,function(e,t){var a=t[0];t[1];if("function"!=typeof a)return!0;a(r)})}),s.fn.callBackSortedFields=function(a,r,n){var i=this;s.fn.aAdminPageFrameworkSortedFieldsCallbacks.forEach(function(e){var t=e[0],e=e[1];if(2<e.length&&-1===s.inArray(a,e))return!0;"function"==typeof t&&t(i,a,r,n)})},s.fn.callBackStoppedSortingFields=function(a,r,n){var i=this;s.fn.aAdminPageFrameworkStoppedSortingFieldsCallbacks.forEach(function(e){var t=e[0],e=e[1];if(2<e.length&&-1===s.inArray(a,e))return!0;"function"==typeof t&&t(i,a,r,n)})},s(document).on("admin-page-framework_saved_widget",function(e,r){s.each(s.fn.aAdminPageFrameworkAddedWidgetCallbacks,function(e,t){var a=t[0];t[1];if("function"!=typeof a)return!0;a(r)})}),s.fn.registerAdminPageFrameworkCallbacks=function(e,t){e=s.extend({added_repeatable_field:null,repeated_field:null,removed_repeatable_field:null,sorted_fields:null,stopped_sorting_fields:null,saved_widget:null,stopped_sorting_sections:null},e);(t=void 0===t?[]:t).push("_nested","inline_mixed"),s.fn.aAdminPageFrameworkAddRepeatableFieldCallbacks.push([e.added_repeatable_field,t]),s.fn.aAdminPageFrameworkRepeatFieldCallbacks.push([e.repeated_field,t]),s.fn.aAdminPageFrameworkRemoveRepeatableFieldCallbacks.push([e.removed_repeatable_field,t]),s.fn.aAdminPageFrameworkSortedFieldsCallbacks.push([e.sorted_fields,t]),s.fn.aAdminPageFrameworkStoppedSortingFieldsCallbacks.push([e.stopped_sorting_fields,t]),s.fn.aAdminPageFrameworkAddedWidgetCallbacks.push([e.saved_widget,t]),s.fn.aAdminPageFrameworkStoppedSortingSectionsCallbacks.push([e.stopped_sorting_sections,t])},s.fn.registerAPFCallback=function(e,t){s.fn.registerAdminPageFrameworkCallbacks(e,t)}}(jQuery),function(f){f(document).ready(function(){f(".admin-page-framework-fields.repeatable").each(function(){var e=f(this).siblings(".repeatable-field-buttons-model");if(!e.length)return!0;var t=e.data(),a=e.children(".admin-page-framework-repeatable-field-buttons").first();e.remove();var r=f(a),e=f(a);e.find(".repeatable-field-button").addClass("button-small");a=f(this).find(".admin-page-framework-field.without-child-fields .repeatable-field-buttons");0<a.length?a.replaceWith(e):(f(this).find(".admin-page-framework-repeatable-field-buttons").length||f(this).find(".admin-page-framework-field.without-nested-fields").prepend(e),f(this).find(".admin-page-framework-field.with-nested-fields").prepend(r)),f(this).updateAdminPageFrameworkRepeatableFields(t)})});var m=AdminPageFrameworkScriptFormMain;f.fn.updateAdminPageFrameworkRepeatableFields=function(e){var t=this.find(".repeatable-field-add-button").first().data("id"),a=f("#"+t),r=f.extend({max:0,min:0,fadein:500,fadeout:500,disabled:!1,preserve_values:0},e);a.data("repeatable")||a.data("repeatable",r);e=f(this).find(".admin-page-framework-repeatable-field-buttons").filter(function(){return f(this).closest(".admin-page-framework-fields").attr("id")===t});e.attr("data-max",r.max),e.attr("data-min",r.min),e.attr("data-fadein",r.fadein),e.attr("data-fadeout",r.fadeout),e.attr("data-preserve_values",r.preserve_values);a=f(this).find(".repeatable-field-add-button");a.off("click"),a.on("click",function(){if(f(this).parent().data("disabled")){var e=f(this).parent().data("disabled");return tb_show(e.caption,f(this).attr("href")),!1}return f(this).addAdminPageFrameworkRepeatableField(),!1});e=f(this).find(".repeatable-field-remove-button");e.off("click"),e.on("click",function(){return f(this).removeAdminPageFrameworkRepeatableField(),!1});e=a.first().closest(".admin-page-framework-field").attr("id"),a=f("#"+t).find(".admin-page-framework-field").filter(function(){return f(this).closest(".admin-page-framework-fields").attr("id")===t}).length;0<r.min&&0<a&&0<r.min-a&&f("#"+e).addAdminPageFrameworkRepeatableField(e)},f.fn.addAdminPageFrameworkRepeatableField=function(e){void 0===e&&(e=f(this).closest(".admin-page-framework-field").attr("id"));var t=f("#"+e),a=t.clone(),r=t.closest(".admin-page-framework-fields"),n=r.attr("id"),i=r.data("repeatable"),d=(i=!i?{max:(s=t.find(".admin-page-framework-repeatable-field-buttons").filter(function(){return f(this).closest(".admin-page-framework-fields").attr("id")===n}).first()).attr("data-max"),min:s.attr("data-min"),fadein:s.attr("data-fadein"),fadeout:s.attr("data-fadeout"),preserve_values:s.attr("data-preserve_values")}:i).fadein,o=i.fadeout,l=i.max,e=r.find(".admin-page-framework-field").filter(function(){return f(this).closest(".admin-page-framework-fields").attr("id")===n}),s=t.find(".admin-page-framework-repeatable-field-buttons").filter(function(){return f(this).closest(".admin-page-framework-fields").attr("id")===n});if(0!=l&&e.length>=l){s=s.last(),l=f(this).formatPrintText(m.messages.cannotAddMore,l),l=f('<span class="repeatable-error repeatable-field-error" id="repeatable-error-'+n+'" >'+l+"</span>");return 0<r.find("#repeatable-error-"+n).length?r.find("#repeatable-error-"+n).replaceWith(l):s.before(l),void l.delay(2e3).fadeOut(o)}i.preserve_values||(a.find("input:not([type=radio], [type=checkbox], [type=submit], [type=hidden]),textarea").val(""),a.find("input[type=checkbox]").prop("checked",!1)),a.find(".repeatable-error").remove(),d?a.hide().insertAfter(t).delay(100).fadeIn(d):a.insertAfter(t),c(a,r),a.updateAdminPageFrameworkRepeatableFields(),t.find("input[type=radio][checked=checked]").prop("checked",!0).attr("checked","checked"),a.trigger("admin-page-framework_added_repeatable_field",[a.data("type"),a.attr("id"),0,0,0]),f(a).find(".admin-page-framework-field").addBack().trigger("admin-page-framework_repeated_field",[0,jQuery(a).closest(".admin-page-framework-fields")]);t=r.find(".repeatable-field-remove-button").filter(function(){return f(this).closest(".admin-page-framework-fields").attr("id")===n});return 1<t.length&&t.css("visibility","visible"),r.children(".admin-page-framework-field").children(".delimiter").show().last().hide(),a};var c=function(e,t){var a=Number(t.attr("data-largest_index"));t.attr("data-largest_index",a+1);var r=t.attr("data-field_tag_id_model"),n=t.attr("data-field_name_model"),i=t.attr("data-field_name_flat_model"),t=t.attr("data-field_address_model");e.incrementAttribute("id",a,r),e.find("label").incrementAttribute("for",a,r),e.find("input,textarea,select,option").incrementAttribute("id",a,r),e.find("input,textarea,select").incrementAttribute("name",a,n),e.find("input[type=hidden].element-address").incrementAttributes(["name","value","data-field_address_model"],a,t),e.find("input[type=radio][data-id],input[type=checkbox][data-id],select[data-id]").incrementAttribute("data-id",a,r),e.find(".admin-page-framework-field,.admin-page-framework-fields,.admin-page-framework-fieldset").incrementAttributes(["id","data-field_tag_id_model","data-field_id"],a,r),e.find(".admin-page-framework-fields").incrementAttributes(["data-field_name_model"],a,n),e.find(".admin-page-framework-fields").incrementAttributes(["data-field_name_flat","data-field_name_flat_model"],a,i),e.find(".admin-page-framework-fields").incrementAttributes(["data-field_address","data-field_address_model"],a,t)};f.fn.removeAdminPageFrameworkRepeatableField=function(){var e=f(this).closest(".admin-page-framework-field"),t=f(this).closest(".admin-page-framework-fields"),a=t.attr("id"),r=t.data("repeatable"),n=r?r.min:0,i=t.find(".admin-page-framework-field").filter(function(){return f(this).closest(".admin-page-framework-fields").attr("id")===a}),d=500;if(0!=n&&i.length<=n){var o=e.find(".admin-page-framework-repeatable-field-buttons").filter(function(){return f(this).closest(".admin-page-framework-fields").attr("id")===a}).last(),i=f(this).formatPrintText(m.messages.cannotRemoveMore,n),n=f('<span class="repeatable-error repeatable-field-error" id="repeatable-error-'+a+'">'+i+"</span>"),i=t.find("#repeatable-error-"+a).filter(function(){return f(this).closest(".admin-page-framework-fields").attr("id")===a});return 0<i.length?i.replaceWith(n):o.before(n),d=r?r.fadeout:500,void n.delay(2e3).fadeOut(d)}d=r?r.fadeout:500,e.fadeOut(d,function(){f(this).remove();var e=t.find(".repeatable-field-remove-button").filter(function(){return f(this).closest(".admin-page-framework-fields").attr("id")===a});1===e.length&&e.css("visibility","hidden")})}}(jQuery),function(i){i(document).ready(function(){i(".admin-page-framework-section-tabs-contents").createTabs()}),i.fn.createTabs=function(e){var r="string"==typeof e&&"refresh"===e;"object"==typeof e&&i.extend({},e);var n=void 0!==window.location.hash?window.location.hash:"";this.children("ul").each(function(){var a=!1;i(this).children("li").each(function(e){var t=i(this).children("a").attr("href");if(""!==n&&t===n)return!(a=!0)}),i(this).children("li").each(function(e){var t=i(this).children("a").attr("href");""!==n&&t===n&&i(this).addClass("active"),r||a||(i(this).addClass("active"),a=!0),i(this).hasClass("active")?i(t).show():i(t).css("display","none"),i(this).addClass("nav-tab"),i(this).children("a").addClass("anchor"),i(this).off("click"),i(this).on("click",function(e){e.preventDefault(),i(this).siblings("li.active").removeClass("active"),i(this).addClass("active");e=i(this).find("a").attr("href");i(this).parent().parent().find(e).css("display","block").siblings(":not( ul )").css("display","none")})})})}}(jQuery),function(t){t(document).ready(function(){t(".admin-page-framework-fields.sortable").each(function(){t(this).enableAdminPageFrameworkSortableFields()})}),t.fn.enableAdminPageFrameworkSortableFields=function(e){e=t("string"==typeof e?"#"+e+".sortable":this);e.off("sortupdate"),e.off("sortstop");e=e.sortable({items:"> div:not( .disabled )"});e.on("sortstop",function(){t(this).callBackStoppedSortingFields(t(this).data("type"),t(this).attr("id"),0)}),e.on("sortupdate",function(){t(this).callBackSortedFields(t(this).data("type"),t(this).attr("id"),0)})}}(jQuery),function(r){r(document).ready(function(){r(".admin-page-framework-sections.sortable-section").each(function(){r(this).enableAdminPageFrameworkSortableSections()})}),r.fn.enableAdminPageFrameworkSortableSections=function(e){var t=r("string"==typeof e?"#"+e+".sortable-section":this),a=t.hasClass("admin-page-framework-section-tabs-contents"),e=0<t.children(".admin-page-framework-section.is_subsection_collapsible").length;(t=a?t.find("ul.admin-page-framework-section-tabs"):t).off("sortupdate"),t.off("sortstop");e=t.sortable({items:a?"> li:not( .disabled )":"> div:not( .disabled, .admin-page-framework-collapsible-toggle-all-button-container )",handle:e&&".admin-page-framework-section-caption",stop:function(e,t){jQuery(this).trigger("admin-page-framework_stopped_sorting_sections",[])}});a||e.on("sortstop",function(){jQuery(this).find("caption > .admin-page-framework-section-title:not(.admin-page-framework-collapsible-sections-title,.admin-page-framework-collapsible-section-title)").first().show(),jQuery(this).find("caption > .admin-page-framework-section-title:not(.admin-page-framework-collapsible-sections-title,.admin-page-framework-collapsible-section-title)").not(":first").hide()})}}(jQuery),function(e){e.fn.reverse=[].reverse,e.fn.formatPrintText=function(){var a=arguments;return a[0].replace(/{(\d+)}/g,function(e,t){return void 0!==a[parseInt(t)+1]?a[parseInt(t)+1]:e})},e.fn.compareVersionNumbers=function(e,t){var a=e.split("."),r=t.split(".");function n(e){for(var t=0;t<e.length;++t)if(!/^\d+$/.test(e[t]))return;return 1}if(!n(a)||!n(r))return NaN;for(var i=0;i<a.length;++i){if(r.length===i)return 1;if(a[i]!==r[i])return a[i]>r[i]?1:-1}return a.length!==r.length?-1:0}}(jQuery),function(o){o(document).ready(function(){o(document).ajaxComplete(function(e,t,a){var r,n,i={},d="string"==typeof a.data?a.data.split("&"):{};for(r in d)n=d[r].split("="),i[decodeURIComponent(n[0])]=decodeURIComponent(n[1]);i.action&&"save-widget"===i.action&&(a=o('input.widget-id[value="'+i["widget-id"]+'"]').parents(".widget"),o(a).find(".admin-page-framework-sectionset").length<=0||(t.responseText?o(document).trigger("admin-page-framework_saved_widget",a):wpWidgets.save(a,0,1,0)))})})}(jQuery);